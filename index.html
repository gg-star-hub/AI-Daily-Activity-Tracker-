<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Daily Activity Tracker</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white h-screen flex flex-col">

  <!-- Header -->
  <header class="bg-gray-800 p-4 text-lg md:text-xl font-bold flex justify-between items-center shadow-md">
    <span>AI Daily Activity Tracker ğŸš€</span>
    <button id="manageBtn" class="px-3 py-1 text-sm md:text-base bg-purple-600 rounded shadow hover:bg-purple-500">
      âš™ï¸ Manage
    </button>
  </header>

  <!-- Log Display -->
  <main id="log" class="flex-1 overflow-y-auto p-2 md:p-4 space-y-2"></main>

  <!-- Floating Action Button -->
  <button id="fabBtn" 
          class="fixed bottom-6 right-6 bg-blue-600 hover:bg-blue-500 text-white rounded-full w-16 h-16 flex items-center justify-center text-3xl shadow-lg transition">
    â•
  </button>

  <!-- Clear Logs Button -->
  <button id="clearBtn" 
          class="fixed bottom-28 right-6 bg-red-600 px-4 py-2 rounded-lg shadow-lg text-sm md:text-base font-semibold hover:bg-red-500">
    ğŸ—‘ï¸ Clear
  </button>

  <!-- Activity Log Modal -->
  <div id="logModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4">
    <div class="bg-gray-800 p-6 rounded-lg w-full max-w-md shadow-xl">
      <h2 class="text-lg font-bold mb-4">Log Activity</h2>
      <div class="flex space-x-2 mb-4">
        <select id="activity" class="flex-1 p-3 rounded bg-gray-700 text-white border border-gray-500 text-base"></select>
        <button id="logBtn" class="px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg font-bold">Log</button>
      </div>
      <div class="text-right">
        <button id="closeLogModal" class="px-4 py-2 bg-gray-600 hover:bg-gray-500 rounded">Close</button>
      </div>
    </div>
  </div>

  <!-- Activity Manager Modal -->
  <div id="activityModal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center p-4">
    <div class="bg-gray-800 p-4 md:p-6 rounded-lg w-full max-w-md shadow-xl">
      <h2 class="text-base md:text-lg font-bold mb-4">Manage Activities</h2>
      <ul id="activityList" class="space-y-2 mb-4"></ul>
      <div class="flex space-x-2">
        <input id="newActivity" placeholder="New activity..." 
               class="flex-1 p-2 rounded bg-gray-700 text-white text-sm md:text-base border border-gray-500">
        <button id="addActivity" class="px-3 py-1 bg-green-600 rounded hover:bg-green-500 text-sm md:text-base">Add</button>
      </div>
      <div class="mt-4 text-right">
        <button id="closeModal" class="px-3 md:px-4 py-2 bg-gray-600 rounded hover:bg-gray-500 text-sm md:text-base">Close</button>
      </div>
    </div>
  </div>

  <script>
    // Default activities
    const defaultActivities = [
      "Sleeping", "Eating", "Drinking", "Personal Hygiene",
      "Working / Studying", "Social Interaction", "Walking / Moving",
      "Leisure / Entertainment", "Resting / Relaxing", "Using Technology / Communication"
    ];

    let activities = JSON.parse(localStorage.getItem("activities") || JSON.stringify(defaultActivities));
    let logs = JSON.parse(localStorage.getItem("activityLogs") || "[]");

    const activitySelect = document.getElementById("activity");
    const logDiv = document.getElementById("log");
    const logBtn = document.getElementById("logBtn");
    const fabBtn = document.getElementById("fabBtn");
    const logModal = document.getElementById("logModal");
    const closeLogModal = document.getElementById("closeLogModal");
    const clearBtn = document.getElementById("clearBtn");
    const manageBtn = document.getElementById("manageBtn");
    const modal = document.getElementById("activityModal");
    const activityList = document.getElementById("activityList");
    const newActivityInput = document.getElementById("newActivity");
    const addActivityBtn = document.getElementById("addActivity");
    const closeModal = document.getElementById("closeModal");

    // AI Coach feedback rules
    function coachFeedback(activity) {
      const feedback = {
        "Sleeping": "ğŸ˜´ Good rest boosts energy and memory.",
        "Eating": "ğŸ Fuel your body well â€” balance is key.",
        "Drinking": "ğŸ’§ Hydration keeps you sharp and healthy.",
        "Personal Hygiene": "ğŸš¿ Clean habits, clean mind!",
        "Working / Studying": "ğŸ’» Great progress â€” consistency builds mastery.",
        "Social Interaction": "ğŸ—£ï¸ Connection strengthens your wellbeing.",
        "Walking / Moving": "ğŸš¶ Movement keeps body & mind active.",
        "Leisure / Entertainment": "ğŸ® Balance fun and focus.",
        "Resting / Relaxing": "ğŸ›‹ï¸ Recharge to prevent burnout.",
        "Using Technology / Communication": "ğŸ“± Stay connected, but avoid overload."
      };
      return feedback[activity] || "âœ¨ Keep going!";
    }

    // Rendering
    function renderActivities() {
      activitySelect.innerHTML = "";
      activities.forEach(a => {
        const opt = document.createElement("option");
        opt.textContent = a;
        activitySelect.appendChild(opt);
      });
    }

    function renderLogs() {
      logDiv.innerHTML = "";
      logs.forEach((e, i) => {
        const row = document.createElement("div");
        row.className = "flex flex-col bg-gray-700 p-2 rounded space-y-1 shadow";
        row.innerHTML = `
          <div class="flex justify-between flex-wrap gap-2">
            <span class="text-sm md:text-base">${e.time} â†’ <b>${e.activity}</b></span>
            <button class="bg-red-500 px-2 rounded text-xs md:text-sm hover:bg-red-400" onclick="deleteLog(${i})">âœ•</button>
          </div>
          <div class="text-xs md:text-sm text-green-400">ğŸ¤– Coach: ${e.feedback}</div>
        `;
        logDiv.appendChild(row);
      });
      logDiv.scrollTop = logDiv.scrollHeight; // auto-scroll
    }

    function renderActivityManager() {
      activityList.innerHTML = "";
      activities.forEach((a, i) => {
        const li = document.createElement("li");
        li.className = "flex justify-between bg-gray-700 p-2 rounded text-sm md:text-base shadow";
        li.innerHTML = `
          <span>${a}</span>
          <button class="bg-red-500 px-2 rounded text-xs md:text-sm hover:bg-red-400" onclick="deleteActivity(${i})">âœ•</button>
        `;
        activityList.appendChild(li);
      });
    }

    // Save
    function saveActivities() {
      localStorage.setItem("activities", JSON.stringify(activities));
      renderActivities();
    }
    function saveLogs() {
      localStorage.setItem("activityLogs", JSON.stringify(logs));
    }

    // Actions
    logBtn.onclick = () => {
      const act = activitySelect.value;
      const entry = { 
        activity: act, 
        time: new Date().toLocaleString(),
        feedback: coachFeedback(act)
      };
      logs.push(entry);
      saveLogs();
      renderLogs();
      logModal.classList.add("hidden");
    };

    clearBtn.onclick = () => {
      if (confirm("Delete all logs?")) {
        logs = [];
        saveLogs();
        renderLogs();
      }
    };

    fabBtn.onclick = () => logModal.classList.remove("hidden");
    closeLogModal.onclick = () => logModal.classList.add("hidden");

    manageBtn.onclick = () => {
      modal.classList.remove("hidden");
      renderActivityManager();
    };
    closeModal.onclick = () => modal.classList.add("hidden");

    addActivityBtn.onclick = () => {
      const val = newActivityInput.value.trim();
      if (val && !activities.includes(val)) {
        activities.push(val);
        saveActivities();
        renderActivityManager();
        newActivityInput.value = "";
      }
    };

    window.deleteLog = (i) => {
      logs.splice(i, 1);
      saveLogs();
      renderLogs();
    };

    window.deleteActivity = (i) => {
      activities.splice(i, 1);
      saveActivities();
      renderActivityManager();
    };

    // Init
    renderActivities();
    renderLogs();
  </script>
</body>
</html>
